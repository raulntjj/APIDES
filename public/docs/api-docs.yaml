openapi: 3.0.0
info:
  title: Desempenho Esportivo
  description: |
    #Documentação da API Rest para Desempenho Esportivo.

    Esta API, juntamente com seu banco de dados, está rodando localmente e serve como uma solução provisória até que seja oficialmente implantada em um servidor.

    ## A API está contando com uma seed de dados fictícios apenas para fins de teste.

    ### Usuários Padrão:
    - **Administrador:**
      - Email: admin@teste.com
      - Senha: 12345678
    - **Avaliador:**
      - Email: avaliador@teste.com
      - Senha: 12345678
    - **Participante:**
      - Email: participante@teste.com
      - Senha: 12345678

    Para mais detalhes, é possível acessar a lista de usuários utilizando o usuário administrador, ou criar um usuário conforme sua necessidade.

  version: 1.0.0
  contact:
    name: Suporte para DEVs
    email: raul.oliveira@versatecnologia.com.br
    url: https://versatecnologia.com.br
  license:
    name: License GPLv3
    url: https://gnu.org/licenses/gpl-3.0.html
  termsOfService: https://versatecnologia.com.br
servers:
  - description: API
    # url: http://127.0.0.1:8001
    url: https://a527-45-70-34-167.ngrok-free.app
tags:
  # - name: Sessão de Clientes da API
  #   description: Por ordens superiores, por enquanto, não será necessário lidar com sessões para consumidores.
  - name: Sessão
    description: Rotas para controle de sessões de usuários
  - name: Senha
    description: Rotas para controle de senha de usuários
  - name: Usuário
    description: Rotas para controle de usuários
  - name: Evento
    description: Rotas para controle de eventos
  - name: Dia de Evento
    description: Rotas para controle de dias de evento
  - name: Instituição
    description: Rotas para controle de instituições
  - name: Modalidade
    description: Rotas para controle de modalidades
  - name: Equipe
    description: Rotas para controle de equipes
  - name: Participante
    description: Rotas para controle de participantes
  - name: Critério
    description: Rotas para controle de critérios
  - name: Subcritério
    description: Rotas para controle de sub-critérios
  - name: Item
    description: Rotas para controle de itens
  - name: Julgamento
    description: Rotas para controle de julgamentos
  - name: Avaliação
    description: Rotas para controle de avaliações
  - name: Conquistas
    description: Rotas para controle de conquistas individuais e lesões (Em manutenção...)
paths:
  /api/login:
    post:
      tags:
        - Sessão
      summary: Autenticar usuário
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  example: admin@teste.com
                password:
                  type: string
                  example: 12345678
      responses:
        '201':
          description: Token para autenticar usuários
        '400':
          description: Falha ao autenticar usuário

  /api/logout:
    post:
      security:
        - bearerAuth: []
      tags:
        - Sessão
      summary: Deslogar usuário
      responses:
        '201':
          description: Usuário deslogado com sucesso
        '400':
          description: Falha ao autenticar usuário

  /api/user:
    get:
      security:
        - bearerAuth: []
      tags:
        - Sessão
      summary: Obter dados do usuário logado
      responses:
        '200':
          description: Dados do usuário
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
        '400':
          description: Erro ao buscar usuário
    put:
      security:
        - bearerAuth: []
      tags:
        - Sessão
      summary: Editar dados do usuário logado
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
      responses:
        '201':
          description: Usuário criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: Falha ao adicionar usuário

    delete:
      security:
        - bearerAuth: []
      tags:
        - Sessão
      summary: Excluir conta do usuário logado
      responses:
        '201':
          description: Usuário excluido com sucesso
        '400':
          description: falha ao excluir usuário

  /api/password/change:
    post:
      security:
        - bearerAuth: []
      tags:
        - Senha
      summary: Trocar senha do usuário
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                old_password:
                  type: string
                  example: 12345678
                new_password:
                  type: string
                  example: 123456789
                new_password_confirmation:
                  type: string
                  example: 123456789
      responses:
        '201':
          description: Senha alterada com sucesso
        '400':
          description: Falha ao alterar senha

  /api/password/forgot:
    post:
      tags:
        - Senha
      summary: Deslogar usuário
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  example: glauco@teste.com
      responses:
        '201':
          description: Senha alterada com sucesso
        '400':
          description: Falha ao alterar senha


  /api/users:
    get:
      security:
        - bearerAuth: []
      tags:
        - Usuário
      summary: Lista todos os usuários (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Pesquisa opcional.
      responses:
        '200':
          description: Lista de usuários recuperada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
        '400':
          description: Erro ao buscar usuário
    post:
      security:
        - bearerAuth: []
      tags:
        - Usuário
      summary: Cria um novo usuário (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
      responses:
        '201':
          description: Usuário criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: Falha ao adicionar usuário
  /api/users/{id}:
    get:
      security:
        - bearerAuth: []
      tags:
        - Usuário
      summary: Obtém um usuário pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID do usuário a ser obtido
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Usuário recuperado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '404':
          description: Usuário não encontrado

    put:
      security:
        - bearerAuth: []
      tags:
        - Usuário
      summary: Atualiza um usuário existente pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID do usuário a ser atualizado
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
      responses:
        '200':
          description: Usuário atualizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '404':
          description: Usuário não encontrado
        '400':
          description: Falha ao atualizar usuário

    delete:
      security:
        - bearerAuth: []
      tags:
        - Usuário
      summary: Remove um usuário pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID do usuário a ser removido
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Usuário removido com sucesso
        '404':
          description: Usuário não encontrado

  /api/judges:
    get:
      security:
        - bearerAuth: []
      tags:
        - Usuário
      summary: Lista todos os usuários do grupo jurados
      responses:
        '200':
          description: Lista de usuários recuperada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
        '400':
          description: Erro ao buscar usuários

  /api/admins:
    get:
      security:
        - bearerAuth: []
      tags:
        - Usuário
      summary: Lista todos os usuários do grupo administrador
      responses:
        '200':
          description: Lista de usuários recuperada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
        '400':
          description: Erro ao buscar usuários

  /api/events:
    get:
      security:
        - bearerAuth: []
      tags:
        - Evento
      summary: Lista todos os eventos
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Pesquisa opcional.
      responses:
        '200':
          description: Lista de eventos recuperada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Event'
        '400':
          description: Erro ao buscar evento
    post:
      security:
        - bearerAuth: []
      tags:
        - Evento
      summary: Cria um novo evento (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      description: Esta requisição irá preecher as tabelas EventDay, e EventAddress. Então será obrigatório o envio dos atributos das mesmas. Como a data e index 1 para Event Day e dados de endereço para EventAddress, em caso de dúvida, verificar no EventRequest. Abaixo também foi deixado o exemplo de requisição
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/Event'
                - $ref: '#/components/schemas/EventAddress'
                - $ref: '#/components/schemas/EventDay'
      responses:
        '201':
          description: evento criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '400':
          description: Falha ao adicionar evento
  /api/events/{id}:
    get:
      security:
        - bearerAuth: []
      tags:
        - Evento
      summary: Obtém um evento pelo ID
      parameters:
        - in: path
          name: id
          required: true
          description: ID do evento a ser obtido
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: evento recuperado com sucesso
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Event'
                  - $ref: '#/components/schemas/EventAddress'
                  - $ref: '#/components/schemas/EventDay'
        '404':
          description: evento não encontrado

    put:
      security:
        - bearerAuth: []
      tags:
        - Evento
      summary: Atualiza um evento existente pelo ID
      parameters:
        - in: path
          name: id
          required: true
          description: ID do evento a ser atualizado
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EventDay'
      responses:
        '200':
          description: evento atualizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EventDay'
        '404':
          description: evento não encontrado
        '400':
          description: Falha ao atualizar evento

    delete:
      security:
        - bearerAuth: []
      tags:
        - Evento
      summary: Remove um evento pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID do evento a ser removido
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: evento removido com sucesso
        '404':
          description: evento não encontrado

  /api/days:
    get:
      security:
        - bearerAuth: []
      tags:
        - Dia de Evento
      summary: Lista todos os dias
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Pesquisa opcional.
      responses:
        '200':
          description: Lista de dias recuperada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/EventDay'
        '400':
          description: Erro ao buscar dia
    post:
      security:
        - bearerAuth: []
      tags:
        - Dia de Evento
      summary: Cria um novo dia (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EventDay'
      responses:
        '201':
          description: dia criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EventDay'
        '400':
          description: Falha ao adicionar dia
  /api/days/{id}:
    get:
      security:
        - bearerAuth: []
      tags:
        - Dia de Evento
      summary: Obtém um dia pelo ID
      parameters:
        - in: path
          name: id
          required: true
          description: ID do dia a ser obtido
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: dia recuperado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EventDay'
        '404':
          description: dia não encontrado

    put:
      security:
        - bearerAuth: []
      tags:
        - Dia de Evento
      summary: Atualiza um dia existente pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID do dia a ser atualizado
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EventDay'
      responses:
        '200':
          description: dia atualizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EventDay'
        '404':
          description: dia não encontrado
        '400':
          description: Falha ao atualizar dia

    delete:
      security:
        - bearerAuth: []
      tags:
        - Dia de Evento
      summary: Remove um dia pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID do dia a ser removido
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: dia removido com sucesso
        '404':
          description: dia não encontrado

  /api/institutions:
    get:
      security:
        - bearerAuth: []
      tags:
        - Instituição
      summary: Lista todos as Instituições
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Pesquisa opcional.
      responses:
        '200':
          description: Lista de Instituições recuperada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Institution'
        '400':
          description: Erro ao buscar Instituição
    post:
      security:
        - bearerAuth: []
      tags:
        - Instituição
      summary: Cria uma nova Instituição (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Institution'
      responses:
        '201':
          description: Instituição criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Institution'
        '400':
          description: Falha ao adicionar Instituição
  /api/institutions/{id}:
    get:
      security:
        - bearerAuth: []
      tags:
        - Instituição
      summary: Obtém uma Instituição pelo ID
      parameters:
        - in: path
          name: id
          required: true
          description: ID da Instituição a ser obtido
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Instituição recuperado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Institution'
        '404':
          description: Instituição não encontrada

    put:
      security:
        - bearerAuth: []
      tags:
        - Instituição
      summary: Atualiza uma Instituição existente pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID da Instituição a ser atualizada
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Institution'
      responses:
        '200':
          description: Instituição atualizada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Institution'
        '404':
          description: Instituição não encontrada
        '400':
          description: Falha ao atualizar Instituição

    delete:
      security:
        - bearerAuth: []
      tags:
        - Instituição
      summary: Remove uma Instituição pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID da Instituição a ser removida
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Instituição removida com sucesso
        '404':
          description: Instituição não encontrada

  /api/modalities:
    get:
      security:
        - bearerAuth: []
      tags:
        - Modalidade
      summary: Lista todos as modalidades
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Pesquisa opcional.
      responses:
        '200':
          description: Lista de modalidades recuperada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Modality'
        '400':
          description: Erro ao buscar modalidade
    post:
      security:
        - bearerAuth: []
      tags:
        - Modalidade
      summary: Cria uma nova modalidade (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Modality'
      responses:
        '201':
          description: modalidade criada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Modality'
        '400':
          description: Falha ao adicionar modalidade
  /api/modalities/{id}:
    get:
      security:
        - bearerAuth: []
      tags:
        - Modalidade
      summary: Obtém uma modalidade pelo ID
      parameters:
        - in: path
          name: id
          required: true
          description: ID da modalidade a ser obtida
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: modalidade recuperada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Modality'
        '404':
          description: modalidade não encontrada

    put:
      security:
        - bearerAuth: []
      tags:
        - Modalidade
      summary: Atualiza uma modalidade existente pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID da modalidade a ser atualizada
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Modality'
      responses:
        '200':
          description: modalidade atualizada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Modality'
        '404':
          description: modalidade não encontrado
        '400':
          description: Falha ao atualizar modalidade

    delete:
      security:
        - bearerAuth: []
      tags:
        - Modalidade
      summary: Remove uma modalidade pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID da modalidade a ser removida
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: modalidade removida com sucesso
        '404':
          description: modalidade não encontrada

  /api/teams:
    get:
      security:
        - bearerAuth: []
      tags:
        - Equipe
      summary: Lista todos as Equipes
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Pesquisa opcional.
      responses:
        '200':
          description: Lista de Equipes recuperada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Team'
        '400':
          description: Erro ao buscar Equipe
    post:
      security:
        - bearerAuth: []
      tags:
        - Equipe
      summary: Cria uma nova Equipe (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Team'
      responses:
        '201':
          description: Equipe criada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
        '400':
          description: Falha ao adicionar Equipe
  /api/teams/{id}:
    get:
      security:
        - bearerAuth: []
      tags:
        - Equipe
      summary: Obtém uma Equipe pelo ID
      parameters:
        - in: path
          name: id
          required: true
          description: ID da Equipe a ser obtida
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Equipe recuperada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
        '404':
          description: Equipe não encontrada

    put:
      security:
        - bearerAuth: []
      tags:
        - Equipe
      summary: Atualiza uma Equipe existente pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID da Equipe a ser atualizada
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Team'
      responses:
        '200':
          description: Equipe atualizada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
        '404':
          description: Equipe não encontrado
        '400':
          description: Falha ao atualizar Equipe

    delete:
      security:
        - bearerAuth: []
      tags:
        - Equipe
      summary: Remove uma Equipe pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID da Equipe a ser removida
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Equipe removida com sucesso
        '404':
          description: Equipe não encontrada

  /api/participants:
    get:
      security:
        - bearerAuth: []
      tags:
        - Participante
      summary: Lista todos os participantes
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Pesquisa opcional.
      responses:
        '200':
          description: Lista de participantes recuperada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Participant'
        '400':
          description: Erro ao buscar Participante
    post:
      security:
        - bearerAuth: []
      tags:
        - Participante
      summary: Cria um novo Participante (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Participant'
      responses:
        '201':
          description: Participante criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Participant'
        '400':
          description: Falha ao adicionar Participante
  /api/participants/{id}:
    get:
      security:
        - bearerAuth: []
      tags:
        - Participante
      summary: Obtém um Participante pelo ID
      parameters:
        - in: path
          name: id
          required: true
          description: ID do Participante a ser obtido
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Participante recuperado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Participant'
        '404':
          description: Participante não encontrado

    put:
      security:
        - bearerAuth: []
      tags:
        - Participante
      summary: Atualiza um Participante existente pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID do Participante a ser atualizado
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Participant'
      responses:
        '200':
          description: Participante atualizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Participant'
        '404':
          description: Participante não encontrado
        '400':
          description: Falha ao atualizar Participante

    delete:
      security:
        - bearerAuth: []
      tags:
        - Participante
      summary: Remove um Participante pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID do Participante a ser removido
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Participante removido com sucesso
        '404':
          description: Participante não encontrado

  /api/criteria:
    get:
      security:
        - bearerAuth: []
      tags:
        - Critério
      summary: Lista todos os Criterios
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Pesquisa opcional.
      responses:
        '200':
          description: Lista de Criterios recuperada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Criterion'
        '400':
          description: Erro ao buscar Criterio
    post:
      security:
        - bearerAuth: []
      tags:
        - Critério
      summary: Cria um novo Criterio (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Criterion'
      responses:
        '201':
          description: Criterio criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Criterion'
        '400':
          description: Falha ao adicionar Criterio
  /api/criteria/{id}:
    get:
      security:
        - bearerAuth: []
      tags:
        - Critério
      summary: Obtém um Criterio pelo ID
      parameters:
        - in: path
          name: id
          required: true
          description: ID do Criterio a ser obtido
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Criterio recuperado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Criterion'
        '404':
          description: Criterio não encontrado

    put:
      security:
        - bearerAuth: []
      tags:
        - Critério
      summary: Atualiza um Criterio existente pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID do Criterio a ser atualizado
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Criterion'
      responses:
        '200':
          description: Criterio atualizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Criterion'
        '404':
          description: Criterio não encontrado
        '400':
          description: Falha ao atualizar Criterio

    delete:
      security:
        - bearerAuth: []
      tags:
        - Critério
      summary: Remove um Criterio pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID do Criterio a ser removido
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Criterio removido com sucesso
        '404':
          description: Criterio não encontrado

  /api/subcriteria:
    get:
      security:
        - bearerAuth: []
      tags:
        - Subcritério
      summary: Lista todos os Subcritérios
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Pesquisa opcional.
      responses:
        '200':
          description: Lista de Subcritérios recuperada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SubCriterion'
        '400':
          description: Erro ao buscar Subcritério
    post:
      security:
        - bearerAuth: []
      tags:
        - Subcritério
      summary: Cria um novo Subcritério (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubCriterion'
      responses:
        '201':
          description: Subcritério criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubCriterion'
        '400':
          description: Falha ao adicionar Subcritério
  /api/subcriteria/{id}:
    get:
      security:
        - bearerAuth: []
      tags:
        - Subcritério
      summary: Obtém um Subcritério pelo ID
      parameters:
        - in: path
          name: id
          required: true
          description: ID do Subcritério a ser obtido
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Subcritério recuperado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubCriterion'
        '404':
          description: Subcritério não encontrado

    put:
      security:
        - bearerAuth: []
      tags:
        - Subcritério
      summary: Atualiza um Subcritério existente pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID do Subcritério a ser atualizado
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubCriterion'
      responses:
        '200':
          description: Subcritério atualizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubCriterion'
        '404':
          description: Subcritério não encontrado
        '400':
          description: Falha ao atualizar Subcritério

    delete:
      security:
        - bearerAuth: []
      tags:
        - Subcritério
      summary: Remove um Subcritério pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID do Subcritério a ser removido
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Subcritério removido com sucesso
        '404':
          description: Subcritério não encontrado

  /api/items:
    get:
      security:
        - bearerAuth: []
      tags:
        - Item
      summary: Lista todos os Items
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Pesquisa opcional.
      responses:
        '200':
          description: Lista de Items recuperada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Item'
        '400':
          description: Erro ao buscar Item
    post:
      security:
        - bearerAuth: []
      tags:
        - Item
      summary: Cria um novo Item (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Item'
      responses:
        '201':
          description: Item criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Item'
        '400':
          description: Falha ao adicionar Item
  /api/items/{id}:
    get:
      security:
        - bearerAuth: []
      tags:
        - Item
      summary: Obtém um Item pelo ID
      parameters:
        - in: path
          name: id
          required: true
          description: ID do Item a ser obtido
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Item recuperado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Item'
        '404':
          description: Item não encontrado

    put:
      security:
        - bearerAuth: []
      tags:
        - Item
      summary: Atualiza um Item existente pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID do Item a ser atualizado
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Item'
      responses:
        '200':
          description: Item atualizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Item'
        '404':
          description: Item não encontrado
        '400':
          description: Falha ao atualizar Item

    delete:
      security:
        - bearerAuth: []
      tags:
        - Item
      summary: Remove um Item pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID do Item a ser removido
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Item removido com sucesso
        '404':
          description: Item não encontrado

  /api/judgments:
    get:
      security:
        - bearerAuth: []
      tags:
        - Julgamento
      summary: Lista todos os Julgamentos
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Pesquisa opcional.
      responses:
        '200':
          description: Lista de Julgamentos recuperada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Judgment'
        '400':
          description: Erro ao buscar Julgamento
    post:
      security:
        - bearerAuth: []
      tags:
        - Julgamento
      summary: Cria um novo Julgamento (ACESSO LIMITADO A USUÁRIOS AVALIADORES)
      description: O atributo scores é em formato JSON, favor verificar antes de enviar. Dentro do mesmo possui um ou mais score
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Judgment'
      responses:
        '201':
          description: Julgamento criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Judgment'
        '400':
          description: Falha ao adicionar Julgamento
  /api/judgments/{id}:
    get:
      security:
        - bearerAuth: []
      tags:
        - Julgamento
      summary: Obtém um Julgamento pelo ID
      parameters:
        - in: path
          name: id
          required: true
          description: ID do Julgamento a ser obtido
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Julgamento recuperado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Judgment'
        '404':
          description: Julgamento não encontrado

    put:
      security:
        - bearerAuth: []
      tags:
        - Julgamento
      summary: Atualiza um Julgamento existente pelo ID (ACESSO LIMITADO A USUÁRIOS AVALIADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID do Julgamento a ser atualizado
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Judgment'
      responses:
        '200':
          description: Julgamento atualizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Judgment'
        '404':
          description: Julgamento não encontrado
        '400':
          description: Falha ao atualizar Julgamento

    delete:
      security:
        - bearerAuth: []
      tags:
        - Julgamento
      summary: Remove um Julgamento pelo ID (ACESSO LIMITADO A USUÁRIOS AVALIADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID do Julgamento a ser removido
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Julgamento removido com sucesso
        '404':
          description: Julgamento não encontrado

  /api/evaluations:
    get:
      security:
        - bearerAuth: []
      tags:
        - Avaliação
      summary: Lista todos as availiações
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Pesquisa opcional.
      responses:
        '200':
          description: Lista de availiações recuperada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Evaluation'
        '400':
          description: Erro ao buscar Avaliação
    post:
      security:
        - bearerAuth: []
      tags:
        - Avaliação
      summary: Cria uma nova Avaliação (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Evaluation'
      responses:
        '201':
          description: Avaliação criada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Evaluation'
        '400':
          description: Falha ao adicionar Avaliação
  /api/evaluations/{id}:
    get:
      security:
        - bearerAuth: []
      tags:
        - Avaliação
      summary: Obtém uma Avaliação pelo ID
      parameters:
        - in: path
          name: id
          required: true
          description: ID da Avaliação a ser obtida
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Avaliação recuperada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Evaluation'
        '404':
          description: Avaliação não encontrada

    put:
      security:
        - bearerAuth: []
      tags:
        - Avaliação
      summary: Atualiza uma Avaliação existente pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID da Avaliação a ser atualizada
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Evaluation'
      responses:
        '200':
          description: Avaliação atualizada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Evaluation'
        '404':
          description: Avaliação não encontrado
        '400':
          description: Falha ao atualizar Avaliação

    delete:
      security:
        - bearerAuth: []
      tags:
        - Avaliação
      summary: Remove uma Avaliação pelo ID (ACESSO LIMITADO A USUÁRIOS ADMINSTRADORES)
      parameters:
        - in: path
          name: id
          required: true
          description: ID da Avaliação a ser removida
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Avaliação removida com sucesso
        '404':
          description: Avaliação não encontrada

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    User:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ID do usuário
          example: 1
        name:
          type: string
          description: Nome do usuário
          example: "João"
        last_name:
          type: string
          description: Sobrenome do usuário
          example: "Da Silva"
        birthday:
          type: string
          format: date
          description: Data de nascimento do participante
          example: "2000-01-01"
        gender:
          type: string
          description: Gênero do participante
          example: "Male"
        photo:
          type: string
          description: Caminho para foto do usuário
          nullable: true
          example: "path/image.jpg"
        email:
          type: string
          format: email
          description: Email do usuário
          example: "joao@gmail.com"
        password:
          type: string
          description: Senha do usuário
          example: "12345678"
        interface_language:
          type: integer
          description: Idioma da interface do usuário
          example: "pt-BR"
        role:
          type: integer
          description: Grupo do usuário
          example: "participant"
      required:
        - name
        - last_name
        - email
        - password
        - gender
        - birthday
        - interface_language
        - role

    Event:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ID do evento
          example: 1
        name:
          type: string
          description: Nome do evento
          example: "Treinamento"
        logo:
          type: string
          description: Caminho para logo do evento
          nullable: true
          example: "path/image.jpg"
      required:
        - name

    EventAddress:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ID do endereço
          example: 1
        event_id:
          type: integer
          format: int64
          description: ID do evento
          example: 1
        address:
          type: string
          description: Rua, avenida, etc.
          example: "Rua do sol"
        number:
          type: integer
          format: int64
          description: Número do imóvel
          example: "120"
        neighborhood:
          type: string
          description: Bairro, distrito, etc.
          example: "Alvorada"
        city:
          type: string
          description: Cidade
          example: "Entre Folhas"
        state:
          type: string
          description: Estado
          example: "MG"
        country:
          type: string
          description: País
          example: "Brasil"
        cep:
          type: string
          description: Código Postal (CEP)
          example: 35300010
      required:
        - event_id
        - address
        - number
        - neighborhood
        - city
        - state
        - country
        - cep

    EventDay:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ID do dia de evento
          example: 1
        event_id:
          type: integer
          format: int64
          description: ID do evento
          example: 1
        date:
          type: string
          format: date
          description: Data
          example: "2024-10-10"
        start_hour:
          type: string
          format: time
          description: Hora de início do evento
          example: "20:00:00"
        index:
          type: integer
          format: int64
          description: Índice ordinário
          example: 2
      required:
        - event_id
        - date
        - start_hour
        - index

    Institution:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ID da instituição
          example: 1
        name:
          type: string
          description: Nome da instituição
          example: JEMG
        logo:
          type: string
          description: Caminho para logo
          example: "path/logo.jpeg"
      required:
        - name

    Modality:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ID da modalidade
          example: 1
        name:
          type: string
          description: Nome da modalidade
          example: "Futebol"
        logo:
          type: string
          description: Caminho para logo
          example: "path/logo.jpeg"
      required:
        - name

    Team:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ID do time
          example: 1
        name:
          type: string
          description: Nome do time
          example: Cruzeiro
        logo:
          type: string
          description: Caminho para logo
          example: path/logo.jpeg
      required:
        - name

    Participant:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ID do participante
          example: 1
        user_id:
          type: integer
          format: int64
          description: ID do usuário
          example: 1
        team_id:
          type: integer
          format: int64
          description: ID do time do participante
          example: 1
        institution_id:
          type: integer
          format: int64
          description: ID da instituição
          nullable: true
        modality_id:
          type: integer
          format: int64
          description: ID da modalidade do participante
          example: 1
        position:
          type: string
          description: Posição do participante
          nullable: true
          example: ST
      required:
        - user_id
        - team_id
        - modality_id

    Criterion:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ID do critério
          example: 1
        name:
          type: string
          description: Nome do critério
          example: Técnica
        points:
          type: string
          description: Pontos do critério
          nullable: true
          example: 100
      required:
        - name

    SubCriterion:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ID do subcritério
          example: 1
        name:
          type: string
          description: Nome do subcritério
          example: Finalizações
        points:
          type: string
          description: Pontos do subcritério
          nullable: true
          example: 25
      required:
        - name

    Item:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ID do item
          example: 1
        sub_criterion_id:
          type: integer
          format: int64
          description: ID do subcritério
          example: 1
        name:
          type: string
          description: Nome do item
          example: Penâlti
        aspect:
          type: string
          enum:
            - measurable
            - quantitative
          description: Poderá ser "measurable" ou "quantitative"
          example: quantitative
        weight:
          type: number
          format: float
          description: Peso para cálculo da nota final caso o aspecto seja quantitativo, caso contrário será nulo.
          nullable: true
          example: 0.02
      required:
        - sub_criterion_id
        - name
        - aspect
        - weight

    Judgment:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ID do julgamento
          example: 1
        evaluation_id:
          type: integer
          format: int64
          description: ID da avaliação
          example: 1
        item_id:
          type: integer
          format: int64
          description: ID do item que será julgado
          example: 1
        attempt:
          type: integer
          format: int64
          description: Número de tentativas
          example: 30
          nullable: true
        correct_attempt:
          type: integer
          format: int64
          description: Número de tentativas corretas
          nullable: true
          example: 25
        fail_attempt:
          type: integer
          format: int64
          description: Número de tentativas falhas
          nullable: true
          example: 5
        score:
          type: number
          format: float
          description: Nota final
          nullable: true
          example: 10
      required:
        - evaluation_id
        - item_id

    Evaluation:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ID da avaliação
          example: 1
        event_day_id:
          type: integer
          format: int64
          description: ID do dia do evento da avaliação
          nullable: true
          example: 1
        participant_id:
          type: integer
          format: int64
          description: ID do participante avaliado
          example: 1
        modality_id:
          type: integer
          format: int64
          description: ID da modalidade da avaliação
          example: 1
        judge_id:
          type: integer
          format: int64
          description: ID do usuário que irá julgar
          example: 2
        date:
          type: string
          format: date
          description: Data da avaliação
          nullable: true
          example: "2024-10-10"
      required:
        - participant_id
        - modality_id
        - judge_id
